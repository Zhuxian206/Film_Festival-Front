(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{3530:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"mt-5",attrs:{id:"admin"}},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-nav",{attrs:{tabs:"",align:"center"}},[a("b-nav-item",{attrs:{to:"/admin/movies",exact:"","exact-active-class":"active"}},[e._v("片單管理")]),a("b-nav-item",{attrs:{to:"/admin/news",exact:"","exact-active-class":"active"}},[e._v("消息管理")]),a("b-nav-item",{attrs:{to:"/admin/orders",exact:"","exact-active-class":"active"}},[e._v("訂單管理")])],1)],1),a("b-col",{attrs:{cols:"12"}},[a("router-view")],1)],1)],1)},i=[],n=a("2877"),o={},s=Object(n["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},afb5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"adminNew"}},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-new",modifiers:{"modal-new":!0}}],staticClass:"my-3",attrs:{variant:"dark"}},[e._v("新增")]),a("b-table",{ref:"table",attrs:{items:e.news,fields:e.fields},scopedSlots:e._u([{key:"cell(image)",fn:function(t){return[t.item.image?a("img",{staticStyle:{height:"50px"},attrs:{src:t.item.image}}):e._e()]}},{key:"cell(upState)",fn:function(t){return[e._v(e._s(t.item.upState?"v":""))]}},{key:"cell(action)",fn:function(t){return[a("b-btn",{attrs:{variant:"success"},on:{click:function(a){return e.editNews(t.index)}}},[e._v("編輯")])]}}])}),a("b-modal",{attrs:{id:"modal-new",title:e.form._id.length>0?"編輯消息":"新增消息",centered:"","ok-variant":"success","ok-title":"送出","cancel-variant":"danger","cancel-title":"取消","ok-disabled":e.modalSubmitting,"cancel-disabled":e.modalSubmitting},on:{ok:e.submitModal,hidden:e.resetForm}},[a("b-form-group",{attrs:{label:"標題","label-for":"input-name",description:"必填欄位","invalid-feedback":"標題必填",state:e.state.name}},[a("b-form-input",{attrs:{id:"input-name",type:"text",required:"",placeholder:"請輸入標題",state:e.state.name},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"消息分類","label-for":"input-category",description:"必填欄位","invalid-feedback":"分類必填",state:e.state.category}},[a("b-form-select",{attrs:{id:"input-category",required:"",options:e.categories,placeholder:"請選擇分類",state:e.state.category},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),a("b-form-group",{attrs:{label:"內文","label-for":"input-description",description:"必填欄位","invalid-feedback":"內文必填",state:e.state.description}},[a("b-form-textarea",{attrs:{id:"input-description",required:"",rows:"3","max-rows":"6",placeholder:"請輸入內文"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("b-form-group",{attrs:{label:"上架"}}),a("b-form-radio",{attrs:{value:!0},model:{value:e.form.upState,callback:function(t){e.$set(e.form,"upState",t)},expression:"form.upState"}},[e._v("上架")]),a("b-form-radio",{attrs:{value:!1},model:{value:e.form.upState,callback:function(t){e.$set(e.form,"upState",t)},expression:"form.upState"}},[e._v("下架")]),a("img-inputer",{attrs:{accept:"image/*",theme:"light",size:"large","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1)],1)},i=[],n=a("5530"),o=a("1da1"),s=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),{data:function(){return{fields:[{key:"image",label:""},{key:"name",label:"標題"},{key:"date",label:"日期"},{key:"category",label:"分類"},{key:"upState",label:"上架"},{key:"action",label:"操作"}],news:[],categories:[{text:"請選擇分類",value:""},"新聞","公告","推廣","其他"],modalSubmitting:!1,form:{name:"",description:"",image:null,category:"",upState:!1,_id:"",index:-1}}},computed:{state:function(){return{name:0!==this.form.name.length||null,description:0!==this.form.description.length||null,category:0!==this.form.category.length||null}}},methods:{submitModal:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,s,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.state.name&&t.state.description&&t.state.category){a.next=4;break}return t.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),a.abrupt("return");case 4:for(i in t.modalSubmitting=!0,r=new FormData,t.form)"_id"!==i&&r.append(i,t.form[i]);if(a.prev=7,0!==t.form._id.length){a.next=16;break}return a.next=11,t.api.post("/news",r,{headers:{authorization:"Bearer "+t.user.token}});case 11:o=a.sent,s=o.data,t.news.push(s.result),a.next=22;break;case 16:return a.next=18,t.api.patch("/news/"+t.form._id,r,{headers:{authorization:"Bearer "+t.user.token}});case 18:c=a.sent,l=c.data,t.news[t.form.index]=Object(n["a"])(Object(n["a"])({},t.form),{},{image:l.result.image}),t.$refs.table.refresh();case 22:t.$bvModal.hide("modal-new"),a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](7),t.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 28:t.modalSubmitting=!1;case 29:case"end":return a.stop()}}),a,null,[[7,25]])})))()},resetForm:function(e){this.modalSubmitting?e.preventDefault():this.form={name:"",description:"",image:null,category:"",upState:!1,_id:""}},editNews:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.news[e]),{},{image:null,index:e}),this.$bvModal.show("modal-new")}},createdNews:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/news/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:a=t.sent,r=a.data,e.news=r.result,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"取得消息失敗"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),c=s,l=a("2877"),m=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=m.exports},b0c0:function(e,t,a){var r=a("83ab"),i=a("5e77").EXISTS,n=a("e330"),o=a("9bf2").f,s=Function.prototype,c=n(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,m=n(l.exec),u="name";r&&!i&&o(s,u,{configurable:!0,get:function(){try{return m(l,c(this))[1]}catch(e){return""}}})},c732:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"text-center mt-5"},[e._v("管理項目")])},i=[],n=a("2877"),o={},s=Object(n["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},e01a:function(e,t,a){"use strict";var r=a("23e7"),i=a("83ab"),n=a("da84"),o=a("e330"),s=a("1a2d"),c=a("1626"),l=a("3a9b"),m=a("577e"),u=a("9bf2").f,d=a("e893"),f=n.Symbol,p=f&&f.prototype;if(i&&c(f)&&(!("description"in p)||void 0!==f().description)){var b={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:m(arguments[0]),t=l(p,this)?new f(e):void 0===e?f():f(e);return""===e&&(b[t]=!0),t};d(v,f),v.prototype=p,p.constructor=v;var g="Symbol(test)"==String(f("test")),h=o(p.toString),x=o(p.valueOf),k=/^Symbol\((.*)\)[^)]+$/,w=o("".replace),S=o("".slice);u(p,"description",{configurable:!0,get:function(){var e=x(this),t=h(e);if(s(b,e))return"";var a=g?S(t,7,-1):w(t,k,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:v})}},ec5c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"text-center mt-5"},[e._v("訂單管理")])},i=[],n=a("2877"),o={},s=Object(n["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},f3d7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"adminmovie"}},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-movie",modifiers:{"modal-movie":!0}}],staticClass:"my-3",attrs:{variant:"dark"}},[e._v("新增")]),a("b-table",{ref:"table",attrs:{items:e.movies,fields:e.fields},scopedSlots:e._u([{key:"cell(image)",fn:function(t){return[t.item.image?a("img",{staticStyle:{height:"50px"},attrs:{src:t.item.image}}):e._e()]}},{key:"cell(upState)",fn:function(t){return[t.item.upState?a("b-icon",{attrs:{icon:"arrow-bar-up"}}):e._e()]}},{key:"cell(action)",fn:function(t){return[a("b-btn",{attrs:{variant:"dark"},on:{click:function(a){return e.editMovie(t.index)}}},[a("b-icon",{attrs:{icon:"brush"}})],1)]}}])}),a("b-modal",{attrs:{id:"modal-movie",title:e.form._id.length>0?"編輯影片":"新增影片",centered:"","ok-variant":"success","ok-title":"送出","cancel-variant":"danger","cancel-title":"取消","ok-disabled":e.modalSubmitting,"cancel-disabled":e.modalSubmitting},on:{ok:e.submitModal,hidden:e.resetForm}},[a("b-form-group",{attrs:{label:"電影名稱","label-for":"input-name",description:"必填欄位","invalid-feedback":"電影名稱必填",state:e.state.name}},[a("b-form-input",{attrs:{id:"input-name",type:"text",required:"",placeholder:"請輸入電影名稱",state:e.state.name},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"影片說明","label-for":"input-description",description:"必填欄位","invalid-feedback":"影片說明必填",state:e.state.description}},[a("b-form-textarea",{attrs:{id:"input-description",rows:"3","max-rows":"6",required:"",placeholder:"請輸入影片說明",state:e.state.description},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("b-form-group",{attrs:{label:"導演名稱","label-for":"input-director",description:"必填欄位","invalid-feedback":"導演名稱必填",state:e.state.director}},[a("b-form-input",{attrs:{id:"input-director",type:"text",required:"",placeholder:"請輸入導演名稱",state:e.state.director},model:{value:e.form.director,callback:function(t){e.$set(e.form,"director",t)},expression:"form.director"}})],1),a("b-form-group",{attrs:{label:"導演介紹","label-for":"input-directorDesc",description:"請輸入導演介紹文字(選填)",state:e.state.directorDesc}},[a("b-form-textarea",{attrs:{id:"input-directorDesc",rows:"3","max-rows":"6",placeholder:"請輸入導演介紹",state:e.state.directorDesc},model:{value:e.form.directorDesc,callback:function(t){e.$set(e.form,"directorDesc",t)},expression:"form.directorDesc"}})],1),a("b-form-group",{attrs:{label:"上架"}},[a("b-form-radio",{attrs:{value:!0},model:{value:e.form.upState,callback:function(t){e.$set(e.form,"upState",t)},expression:"form.upState"}},[e._v("上架")]),a("b-form-radio",{attrs:{value:!1},model:{value:e.form.upState,callback:function(t){e.$set(e.form,"upState",t)},expression:"form.upState"}},[e._v("下架")])],1),a("img-inputer",{attrs:{accept:"image/*",theme:"light",size:"large","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1)],1)},i=[],n=a("5530"),o=a("1da1"),s=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),{data:function(){return{fields:[{key:"image",label:""},{key:"name",label:"片名"},{key:"director",label:"導演"},{key:"upState",label:"上架"},{key:"action",label:"操作"}],movies:[],modalSubmitting:!1,form:{name:"",description:"",image:"",director:"",directorDesc:"",upState:!1,_id:"",index:-1}}},computed:{state:function(){return{name:0!==this.form.name.length||null,description:0!==this.form.description.length||null,director:0!==this.form.director.length||null}}},methods:{submitModal:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,o,s,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.state.name&&t.state.description&&t.state.director){a.next=4;break}return t.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),a.abrupt("return");case 4:for(i in t.modalSubmitting=!0,r=new FormData,t.form)"_id"!==i&&r.append(i,t.form[i]);if(a.prev=7,0!==t.form._id.length){a.next=16;break}return a.next=11,t.api.post("/movies",r,{headers:{authorization:"Bearer "+t.user.token}});case 11:o=a.sent,s=o.data,t.movies.push(s.result),a.next=22;break;case 16:return a.next=18,t.api.patch("/movies/"+t.form._id,r,{headers:{authorization:"Bearer "+t.user.token}});case 18:c=a.sent,l=c.data,t.movies[t.form.index]=Object(n["a"])(Object(n["a"])({},t.form),{},{image:l.result.image}),t.$refs.table.refresh();case 22:t.$bvModal.hide("modal-movie"),a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](7),t.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 28:t.modalSubmitting=!1;case 29:case"end":return a.stop()}}),a,null,[[7,25]])})))()},resetForm:function(e){this.modalSubmitting?e.preventDefault():this.form={name:"",description:"",image:"",director:"",directorDesc:"",upState:!1,_id:""}},editMovie:function(e){this.form=Object(n["a"])(Object(n["a"])({},this.movies[e]),{},{image:null,index:e}),this.$bvModal.show("modal-movie")}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/movies/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:a=t.sent,r=a.data,e.movies=r.result,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"取得影片失敗"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),c=s,l=a("2877"),m=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=admin.0591f702.js.map